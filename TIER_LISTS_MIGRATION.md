# üóÑÔ∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—é –ú–∏–≥—Ä–∞—Ü–∏–π Supabase

## –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç (2 –º–∏–Ω—É—Ç—ã)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Supabase CLI (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Supabase CLI (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
npm install -g supabase

# 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
supabase init

# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
supabase db push

# –ì–æ—Ç–æ–≤–æ! ‚úÖ
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Supabase Web Console (3 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä–æ–π—Ç–µ [supabase.com](https://supabase.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –û—Ç–∫—Ä–æ–π—Ç–µ **SQL Editor**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:
   ```
   supabase/migrations/20250109_create_tier_lists.sql
   ```
5. –ù–∞–∂–º–∏—Ç–µ **Run** (–±–æ–ª—å—à–∞—è –∑–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞)
6. –û–∂–∏–¥–∞–π—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ < 5 —Å–µ–∫)

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ `psql` (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–π –ë–î Supabase
psql postgresql://postgres:[PASSWORD]@[HOST]:5432/postgres

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∏–≥—Ä–∞—Ü–∏–∏
\i supabase/migrations/20250109_create_tier_lists.sql

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã
\dt tier_*
```

---

## üìã –ß—Ç–æ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

–ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞—ë—Ç:

### –¢–∞–±–ª–∏—Ü—ã
```
‚úÖ tier_lists ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ç–∏—Ä-–ª–∏—Å—Ç–æ–≤
‚úÖ tier_list_items ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Ç–∏—Ä-–ª–∏—Å—Ç–µ
```

### –ò–Ω–¥–µ–∫—Å—ã (–¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
```
‚úÖ idx_tier_lists_user_id ‚Äî –ø–æ–∏—Å–∫ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
‚úÖ idx_tier_lists_is_public ‚Äî –ø–æ–∏—Å–∫ –ø—É–±–ª–∏—á–Ω—ã—Ö
‚úÖ idx_tier_list_items_tier_list_id ‚Äî –ø–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
‚úÖ idx_tier_list_items_tier ‚Äî –ø–æ–∏—Å–∫ –ø–æ —É—Ä–æ–≤–Ω—é
```

### RLS –ü–æ–ª–∏—Ç–∏–∫–∏ (–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
```
‚úÖ 4 –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è tier_lists (SELECT, INSERT, UPDATE, DELETE)
‚úÖ 4 –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è tier_list_items (SELECT, INSERT, UPDATE, DELETE)
```

### –í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ SQL: **~400 —Å—Ç—Ä–æ–∫**

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### –ü–æ—Å–ª–µ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ú–∏–≥—Ä–∞—Ü–∏–∏:

1. **–í Supabase Console ‚Üí Tables**
   ```
   ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:
   - tier_lists
   - tier_list_items
   ```

2. **–í Supabase Console ‚Üí Policies**
   ```
   ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã RLS –ø–æ–ª–∏—Ç–∏–∫–∏:
   - Users can view their own tier lists
   - Users can view public tier lists
   - Users can create tier lists
   - Users can update their own tier lists
   - Users can delete their own tier lists
   + –µ—â—ë 4 –¥–ª—è tier_list_items
   ```

3. **–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (SQL –∑–∞–ø—Ä–æ—Å)**
   ```sql
   -- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã
   SELECT * FROM pg_tables 
   WHERE schemaname = 'public' 
   AND tablename LIKE 'tier%';
   
   -- –î–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è 2 —Ç–∞–±–ª–∏—Ü—ã ‚úÖ
   ```

---

## üö® –û—à–∏–±–∫–∏ –∏ –†–µ—à–µ–Ω–∏—è

### ‚ùå –û—à–∏–±–∫–∞: "Already exists"
```
–ü—Ä–∏—á–∏–Ω–∞: –¢–∞–±–ª–∏—Ü—ã —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã
–†–µ—à–µ–Ω–∏–µ: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ, —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ –≥–æ—Ç–æ–≤—ã
```

### ‚ùå –û—à–∏–±–∫–∞: "Permission denied"
```
–ü—Ä–∏—á–∏–Ω–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤
–†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∏–π –∞–∫–∫–∞—É–Ω—Ç Supabase
```

### ‚ùå –û—à–∏–±–∫–∞: "Column doesn't exist"
```
–ü—Ä–∏—á–∏–Ω–∞: –ù–µ–ø–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
–†–µ—à–µ–Ω–∏–µ: –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –ø–æ–ª–Ω–æ—Å—Ç—å—é, —É–¥–∞–ª–∏–≤ —Ç–∞–±–ª–∏—Ü—ã –≤—Ä—É—á–Ω—É—é:
  DROP TABLE IF EXISTS tier_list_items CASCADE;
  DROP TABLE IF EXISTS tier_lists CASCADE;
  -- –ó–∞—Ç–µ–º –∑–∞–Ω–æ–≤–æ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
```

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¢–∞–±–ª–∏—Ü—ã tier_lists:

```sql
SELECT column_name, data_type, is_nullable
FROM information_schema.columns
WHERE table_name = 'tier_lists'
ORDER BY ordinal_position;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
id           | uuid              | NO
user_id      | uuid              | NO
title        | character varying | NO
description  | text              | YES
is_public    | boolean           | NO
created_at   | timestamp with... | NO
updated_at   | timestamp with... | NO
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¢–∞–±–ª–∏—Ü—ã tier_list_items:

```sql
SELECT column_name, data_type, is_nullable
FROM information_schema.columns
WHERE table_name = 'tier_list_items'
ORDER BY ordinal_position;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
id           | uuid              | NO
tier_list_id | uuid              | NO
content_id   | character varying | NO
content_type | character varying | NO
title        | character varying | NO
poster_url   | text              | YES
rating       | double precision  | YES
tier         | character varying | NO
position     | integer           | NO
created_at   | timestamp with... | NO
```

---

## üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS

### –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ RLS –í–∫–ª—é—á–µ–Ω–∞:

```sql
-- –î–ª—è tier_lists
SELECT relname, relrowsecurity
FROM pg_class
WHERE relname = 'tier_lists';

-- –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: relrowsecurity = true ‚úÖ
```

---

## üöÄ –ß—Ç–æ –î–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:

1. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
   ```bash
   npm run dev
   ```

2. ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

3. ‚úÖ **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É **Tier Lists**

4. ‚úÖ **–°–æ–∑–¥–∞–π—Ç–µ** –ø–µ—Ä–≤—ã–π —Ç–∏—Ä-–ª–∏—Å—Ç

5. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìû –ü–æ–º–æ—â—å

### –ï—Å–ª–∏ –ß—Ç–æ-—Ç–æ –ù–µ –†–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Supabase**
   - –í Console ‚Üí Logs —Å–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫–∏

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏–º–µ–Ω–µ–Ω–∞

3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å**
   - –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+Delete)
   - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)

4. **–û—Ç–∫—Ä–æ–π—Ç–µ Console**
   - F12 ‚Üí Console —Å–º–æ—Ç—Ä–∏—Ç–µ JavaScript –æ—à–∏–±–∫–∏

5. **–°–æ–∑–¥–∞–π—Ç–µ Issue**
   - –ù–∞ GitHub —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –§–∞–π–ª –ú–∏–≥—Ä–∞—Ü–∏–∏
üìç `supabase/migrations/20250109_create_tier_lists.sql`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üìñ [TIER_LISTS_GUIDE.md](./TIER_LISTS_GUIDE.md) ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üîß [TIER_LISTS_FEATURE.md](./TIER_LISTS_FEATURE.md) ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ [TIER_LISTS_COMPLETION.md](./TIER_LISTS_COMPLETION.md) ‚Äî —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –§–∞–π–ª—ã
- üóÇÔ∏è `src/utils/tierListService.ts` ‚Äî API —Ñ—É–Ω–∫—Ü–∏–∏
- üé® `src/components/TierListDisplay.tsx` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üîç `src/components/TierListSearch.tsx` ‚Äî –ø–æ–∏—Å–∫
- üìÑ `src/pages/TierLists.tsx` ‚Äî –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

---

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–∞—à–∞ Supabase –±–∞–∑–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∏—Ä-–ª–∏—Å—Ç–∞–º–∏! üéâ

**–í—Ä–µ–º—è –Ω–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** ~2-5 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê –ù–∏–∑–∫–∞—è  
**–†–∏—Å–∫:** ‚≠ê –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (–≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã)

---

**Happy Tier Listing! üöÄ**
